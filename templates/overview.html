{% if not data.empty %}
  <div class="card z-depth-0" style="margin-bottom: 14px;">
    <div class="card-content">

      <div class="row" style="margin-top: 8px;">

        <!-- <div class="col s12 m12">
          <h6 class="grey-text text-darken-2" style="margin-bottom: 6px;">Sugestões de Planos de Ação</h6>
          <div class="content-box">
            {{ (area_review or '—') | safe }}
          </div>
        </div> -->

        <!-- <div class="col s12 m12" style="margin-top: 20px;">  
          <div class="content-box table-wrap">
            <h6 class="red-text text-darken-2" style="margin-bottom: 12px;">Áreas críticas via análise de comentários</h6>
            <table class="striped responsive-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Área</th>
                  <th>Insatisfações</th>
                  <th>Adesão</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody>
                {% set total = ranking_areas|length %}
                {% for a in ranking_areas %}
                  {% set weight = 1.2 - ((loop.index0) / (total - 1)) if total > 1 else 1 %}
                  {% set rgba = "rgba(255, 0, 0, {:.2f})".format(weight) %}
                  <tr style="background-color: {{ rgba }};">
                    <td>#{{ loop.index }}</td>
                    <td>{{ a.area_name or '—' }}</td>
                    <td>{{ (a.area_criticism_number or 0) + (a.area_suggestions_number or 0) }}</td>
                    <td>{{ (a.area_response_rate * 100) | round(1) }}%</td>
                    <td>{{ (a.area_score or 0) | round(2) }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div> -->

        <div class="col s12 m12" style="margin-top: 20px;">  
          <div class="content-box table-wrap">
            <h6 class="red-text text-darken-2" style="margin-bottom: 12px;">Os temas com maior necessidade de desenvolvimento são:</h6>
            <table class="striped responsive-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Tema</th>
                </tr>
              </thead>
              <tbody>
                {% set total = data|length - 1 %}
                {% for d in data %}
                  {% if d.tipo == 1 %}
                  {% set weight = 1.2 - ((loop.index0) / (total - 1)) if total > 1 else 1 %}
                  {% set rgba = "rgba(255, 0, 0, {:.2f})".format(weight) %}
                  <tr style="background-color: {{ rgba }};">
                    <td>#{{ loop.index }}</td>
                    <td>{{ d.theme_name or '-' }}</td>
                  </tr>
                  {% endif %}
                {% endfor %}
              </tbody>
            </table>

          </div>
        </div>

        {% if not data.empty %}
        <div class="col s12 m12" style="margin-top: 20px;">
          <h6 class="grey-text text-darken-2" style="margin-bottom: 6px;">Sugestões de Planos de Ação</h6>
          {% for item in data %} 
          <div class="content-box-plan col s12 m12">
            
              {{ item.action_plan | safe }}
          
          </div>
          {% endfor %}
         
        </div>
        {% endif %}

      </div>
    </div>
  </div>
{% endif %}